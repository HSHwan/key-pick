{% extends 'booking/base.html' %}

{% block content %}
<div class="container">
    <div class="content-box mb-5">
        <div class="row align-items-center">
            <div class="col-md-8">
                <span class="badge bg-secondary mb-2">{{ theme.branch.branch_name }}</span>
                <h1 class="fw-bold mb-3">{{ theme.name }}</h1>
                
                <div class="d-flex gap-3 text-muted mb-4">
                    <span>ğŸ§© {{ theme.genre }}</span>
                    <span>ğŸ”¥ ë‚œì´ë„ {{ theme.difficulty }}</span>
                    <span>â±ï¸ {{ theme.duration }}ë¶„</span>
                </div>
                
                <h3 class="fw-bold text-primary mb-4">{{ theme.price }}ì› <small class="fs-6 text-muted fw-normal">/ 1ì¸</small></h3>
                
                <p class="lead fs-6" style="line-height: 1.8;">{{ theme.description|linebreaksbr }}</p>
            </div>
            
            <div class="col-md-4 text-center mt-4 mt-md-0">
                <div class="p-4 bg-light rounded-3">
                    <p class="mb-3 text-muted">ì§€ê¸ˆ ë°”ë¡œ ë„ì „í•˜ì„¸ìš”!</p>
                    <a href="{% url 'reservation-create' theme.theme_id %}" class="btn btn-primary w-100 py-3 fw-bold fs-5" style="background-color: #4e54c8; border: none;">
                        ì´ í…Œë§ˆ ì˜ˆì•½í•˜ê¸°
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="mb-5">
        <h3 class="fw-bold mb-4">ğŸ“ ìƒìƒ í›„ê¸° <span class="text-muted fs-5">({{ reviews.count }})</span></h3>
        
        {% for review in reviews %}
        <div class="content-box p-4 mb-3">
            <div class="d-flex justify-content-between align-items-start mb-2">
                <div>
                    <span class="fw-bold me-2">{{ review.member.name }}</span>
                    <span class="text-warning fw-bold">â˜… {{ review.rating }}</span>
                </div>
                <span class="text-muted small">{{ review.created_at|date:"Y.m.d" }}</span>
            </div>
            
            <p class="mb-2 text-secondary">{{ review.comment|linebreaksbr }}</p>
            
            {% if review.member == user %}
                <div class="text-end mt-2">
                    <a href="{% url 'review-update' review.review_id %}" class="btn btn-sm btn-outline-secondary py-0">ìˆ˜ì •</a>
                    <form action="{% url 'review-delete' review.review_id %}" method="POST" class="d-inline">
                        {% csrf_token %}
                        <button type="submit" onclick="return confirm('ì´ ë¦¬ë·°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');" 
                                class="btn btn-sm btn-outline-danger py-0 border-0">
                            ì‚­ì œ
                        </button>
                    </form>
                </div>
            {% endif %}
        </div>
        {% empty %}
            <div class="text-center py-5 text-muted bg-white rounded shadow-sm">
                ì•„ì§ ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ë¦¬ë·°ì–´ê°€ ë˜ì–´ë³´ì„¸ìš”! ğŸ•µï¸
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}